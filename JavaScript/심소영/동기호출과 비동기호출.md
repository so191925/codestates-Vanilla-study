# 동기호출과 비동기호출

동기와 비동기는 어떤 작업이나 그와 연관된 작업을 처리하고자 하는 시각의 차이이다.   
동기는 추구하는 행위(목적)가 같으며 동시에 이뤄진다.   
비동기는 추구하는 행위(목적)가 다를수도 있으며 동시에 이뤄지지 않는다.

동기는 순차적, 직렬적으로 일을 수행하고   
비동기는 병렬적으로 일을 수행한다.

||장점|단점|
|------|---|---|
|동기|설계가 간단하고 직관적|결과가 나올때까지   아무것도 못하고 대기해야 한다.|
|비동기|결과가 나오는 시간까지 다른 작업을 할 수 있다.|동기보다 설계가 복잡하다.|

## 📌 동기 (synchronous)

동기는 요청을 보낸 후 응답을 받아야지만 다음 동작이 이뤄지는 방식이다.   
요청을 하면 소요시간이 얼마나 걸리던지 요청한 자리에서 결과가 주어져야 한다.   
모든 일은 순차적으로 실행되며 어떤 작업이 수행중이라면 다음 작업은 대기한다.
ex) A노드와 B노드의 작업처리 단위(transaction)을 동시에 맞추겠다.
[동기식 처리 모델]
![img](https://poiemaweb.com/img/synchronous.png)

### 🧩 동기적 동작의 예시 (계좌이체)

![img](https://user-images.githubusercontent.com/104320234/177022266-445ce090-fdb4-40c8-9b6e-aa0416145cbc.jpeg)

[동기적 처리 단계]   
1. A의 계좌에서 10,000원을 뺄 예정
2. A의 계좌가 B의 계좌에 10,000원을 송금.
3. B의 계좌는 10,000원을 받았다는걸 인지하고, A계좌에 10,000원을 받았다고 알림을 전송한다.
4. A와 B 계좌 각각 차감과 증가가 동시에 발생했다.
> A와 B 계좌는 서로 요청과 응답 (1-3과정)을 확인한 후 같은 일을 동시에 진행(4번)했다. 이처럼 계좌이체 같은 작업은 동기 방식으로 처리해야 A에서는 보냈는데 B에서는 못받는 현상이 일어나지 않는다.


### 💻 동기호출 예시코드

```js
function func1() {
    console.log('첫번째호출');
    func2(); // 두번째 함수를 실행시켜줌
}

function func2(){
    console.log('두번째호출');
    func3(); //세번째 함수를 실행시켜줌
}

function func3() {
    console.log('세번째호출');
}

func1(); // 첫번째 함수를 호출함으로써 두번째,세번째 함수까지 순차적으로 호출
// 출력
// 첫번째호출
// 두번째호출
// 세번째호출
```
****
## 📌 비동기 (asynchronous)

요청과 결과가 동시에 일어나지 않을거라는 약속이다.   
요청한 그 자리에서 결과가 주어지지 않는다.   
노드사이의 작업 처리 단위를 동시에 맞추지 않아도 된다.   
대표적인 예시로 setTimeout, AJAX통신
[비동기식 처리 모델]
![img](https://poiemaweb.com/img/asynchronous.png)

### 🧩 비동기 방식의 필요성

1. 데이터를 서버로부터 받아오는 앱일 경우, 서버로부터 데이터를 받아와서 해당 데이터를 뿌려줘야 한다.   
2. 따라서 서버로부터 데이터를 받아오는 코드가 맨 처음 실행되어야 할 코드이다.   
3. 이때 비동기로 처리하지 않고 동기적으로 처리하면 데이터를 받아오기까지 기다린 뒤 앱이 실행된다.
4. 데이터의 양이 늘어날수록 앱의 실행속도가 느려지게 된다.   
5. 이를 해결하기 위해 데이터를 서버로부터 받아오는 코드와 페이지를 표시하는 코드는 비동기적으로 처리해야 한다.

### 🧩 비동기적 동작의 예시 (시험시간)
![img](https://user-images.githubusercontent.com/104320234/177022405-188160f3-be17-4837-b9c1-9002fa8e4c76.png)

[비동기적 처리 단계]
1. 학생들은 시험문제를 푼다.
2. 문제를 모두 푼 학생은 선생님에게 시험지를 전달한다.
3. 선생님은 학생의 시험지를 채점한다.
4. 채점이 다 된 시험지를 학생에게 전달한다.
5. 학생은 선생님이 전달한 시험지를 받아 결과를 확인한다.

> 학생과 선생님은 시험지라는 연결고리가 있지만 시험지에 행하는 행위(목적)은 서로 다르다.(풀기 / 채점) 서로의 행위(목적)이 다르기때문에 둘의 작업 처리 시간은 일치하지 않으며 그래도 된다.   
> 
> 즉 학생이 선생님에게 시험지를 전달 후 가만히 채점 결과만을 기다린다면 동기적 상태인 `블록 상태`   
> 채점 결과를 받기 전까지 다른공부나 행동을 한다면 비동기적 상태인 `논블록 상태` 라고 한다.

### 💻 비동기호출 예시코드

```js
function func1(){
    console.log('func1');
    func2();
}

function func2(){
    setTimeout(function(){
        console.log('func2');
    }, 3000);
    func3();
}

function func3(){
    console.log('func3');
}
func1();
/*
실행결과
func1
func3
func2 // 3초뒤에 출력
*/

```



